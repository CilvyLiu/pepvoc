<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Unit 1: Hello! | Junior Explorer</title>
    <style>
        :root { --primary: #FF6B6B; --accent: #FF9F43; --bg: #FFF9F9; --card-bg: #FFFFFF; }
        body { 
            font-family: 'Segoe UI', system-ui, sans-serif; background: var(--bg); color: #444; margin: 0; padding: 0;
            -webkit-tap-highlight-color: transparent;
        }

        /* é¡¶éƒ¨çŠ¶æ€æ  */
        .status-bar {
            position: sticky; top: 0; z-index: 1000;
            background: rgba(255, 255, 255, 0.9); backdrop-filter: blur(10px);
            border-bottom: 3px solid var(--primary); padding: 15px 20px;
            display: flex; align-items: center; justify-content: space-between;
            height: 60px;
        }
        #word-display { font-size: 24px; font-weight: 900; color: var(--primary); }
        #chinese-display { font-size: 16px; color: #888; margin-top: 2px; }

        /* å¡ç‰‡ç½‘æ ¼ */
        .vocab-grid { 
            display: grid; grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); 
            gap: 15px; padding: 20px; 
        }
        
        .card {
            background: var(--card-bg); border-radius: 20px; padding: 20px;
            text-align: center; cursor: pointer; border: 3px solid #F0F0F0;
            transition: all 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            box-shadow: 0 6px 0 #EEE;
        }
        .card:active { transform: translateY(4px); box-shadow: 0 2px 0 #EEE; border-color: var(--primary); }
        .card.active { border-color: var(--primary); background: #FFF0F0; }

        .word-txt { font-size: 18px; font-weight: bold; color: #333; display: block; margin-bottom: 5px; }
        .ipa-txt { font-size: 12px; color: var(--accent); font-family: Arial; }
        
        .back-btn { background: var(--primary); color: white; border: none; padding: 8px 15px; border-radius: 50px; font-weight: bold; cursor: pointer; }
    </style>
</head>
<body>

    <div class="status-bar">
        <div class="info">
            <div id="word-display">START!</div>
            <div id="chinese-display">ç‚¹å‡»å¡ç‰‡å¬è¯»éŸ³</div>
        </div>
        <button class="back-btn" onclick="history.back()">è¿”å›</button>
    </div>

    <div class="vocab-grid" id="container">ğŸ“¡ æ­£åœ¨åŒæ­¥å•è¯é­”æ³•...</div>

    <script>
        const wordEl = document.getElementById('word-display');
        const chineseEl = document.getElementById('chinese-display');
        const container = document.getElementById('container');

        // --- æ ¸å¿ƒï¼šè·¨å¹³å°éŸ³é¢‘é¢„çƒ­ (é’ˆå¯¹ iOS/å®‰å“) ---
        function unlockAudio() {
            const msg = new SpeechSynthesisUtterance("");
            window.speechSynthesis.speak(msg);
            document.removeEventListener('touchstart', unlockAudio);
        }
        document.addEventListener('touchstart', unlockAudio);

        // --- æ ¸å¿ƒï¼šæ ‡å‡†è‹±éŸ³æ’­æ”¾ (Type 2) ---
        function playUK(text) {
            // ä¼˜å…ˆä½¿ç”¨æœ‰é“æ ‡å‡†è‹±éŸ³æ¥å£
            const audioUrl = `https://dict.youdao.com/dictvoice?audio=${encodeURIComponent(text)}&type=2`;
            const audio = new Audio(audioUrl);
            
            const playPromise = audio.play();
            if (playPromise !== undefined) {
                playPromise.catch(() => {
                    // ç¦»çº¿å…œåº•ï¼šè°ƒç”¨è®¾å¤‡åŸç”Ÿè‹±éŸ³
                    window.speechSynthesis.cancel();
                    const speech = new SpeechSynthesisUtterance(text);
                    speech.lang = 'en-GB'; 
                    speech.rate = 0.8; // ç»™å°æœ‹å‹å¬ï¼Œè¯­é€Ÿç¨å¾®æ”¾æ…¢ä¸€ç‚¹ç‚¹
                    window.speechSynthesis.speak(speech);
                });
            }
        }

        function activate(item, el) {
            wordEl.innerText = item.word;
            chineseEl.innerText = item.chinese + " | " + item.logic;
            
            // åŠ¨ç”»æ•ˆæœ
            wordEl.style.transform = "scale(1.2)";
            setTimeout(() => wordEl.style.transform = "scale(1)", 200);

            document.querySelectorAll('.card').forEach(c => c.classList.remove('active'));
            el.classList.add('active');

            playUK(item.word);
        }

        // åŠ è½½æ•°æ®
        fetch('data.json')
            .then(res => res.json())
            .then(data => {
                container.innerHTML = "";
                data.forEach(item => {
                    const card = document.createElement('div');
                    card.className = 'card';
                    card.onclick = () => activate(item, card);
                    card.innerHTML = `
                        <span class="word-txt">${item.word}</span>
                        <span class="ipa-txt">${item.ipa}</span>
                    `;
                    container.appendChild(card);
                });
            })
            .catch(err => {
                container.innerHTML = "âŒ å“å‘€ï¼Œæ•°æ®ä¸¢äº†ï¼Œå¿«æ£€æŸ¥ä¸€ä¸‹ data.jsonï¼";
            });
    </script>
</body>
</html>
